figma.showUI(__html__,{width:400,height:480,title:"Layout Assistant - Cirrus Design System"});x();figma.on("selectionchange",()=>{x()});var de={"parent.":"parent (default)","child.":"child","subChild.":"sub-child","hero.":"hero"},H=Object.keys(de),J=["spacing-primitive","padding-primitive","corner-radius-primitive"],j={"spacing-primitive":["A1 - \u2194\uFE0F Spacing"],"padding-primitive":["A4 - \u{1F9E9} Padding"],"corner-radius-primitive":["A5 - \u256D Corner Radius"],"A1 \u{1F4D0} Layout":["\u{1F4D0} Layout","A6 - Layout"],"A2 \u{1F4E6} Padding":["\u{1F4E6} Padding"],"A3 \u2194\uFE0F Spacing":["\u2194\uFE0F Spacing"],"A4 \u256D Corner Radius":["\u256D Corner Radius"],"\u{1F4D0} Layout":["A1 \u{1F4D0} Layout","A6 - Layout"]};function D(e,i){let o=e.find(r=>r.name===i);if(o)return o;let a=j[i];if(a){for(let r of a)if(o=e.find(s=>s.name===r),o)return console.log(`\u26A0\uFE0F Using backwards compatibility: Found "${r}" instead of "${i}"`),o}return null}function O(e,i,o=!0){let a=e.find(s=>{let c=(s.libraryName||"").toLowerCase(),d=s.name===i,n=!o||c.includes("cirrus")&&c.includes("native design system");return d&&n});if(a||(a=e.find(s=>s.name===i),a))return a;let r=j[i];if(r)for(let s of r){if(a=e.find(c=>{let d=(c.libraryName||"").toLowerCase(),n=c.name===s,t=!o||d.includes("cirrus")&&d.includes("native design system");return n&&t}),a)return console.log(`\u26A0\uFE0F Using backwards compatibility: Found library collection "${s}" instead of "${i}"`),a;if(a=e.find(c=>c.name===s),a)return console.log(`\u26A0\uFE0F Using backwards compatibility: Found library collection "${s}" instead of "${i}"`),a}return null}function we(e,i){if(e.find(a=>a.name===i))return!0;let o=j[i];if(o){for(let a of o)if(e.find(r=>r.name===a))return!0}return!1}var le={"parent.":"child.","child.":"subChild.","subChild.":"subChild.","hero.":"parent."};async function x(){let e=figma.currentPage.selection;if(e.length===1){let i=e[0];await figma.currentPage.loadAsync();let o=null;try{i.parent&&i.parent.type!=="PAGE"&&(o={id:i.parent.id,name:i.parent.name,type:i.parent.type})}catch(d){console.log("Could not access parent node:",d),o=null}let a=[];if("children"in i&&i.children){let d=(n,t=1,l=4)=>{let p=[];for(let u of n){if(!Ce(u.name))continue;let g={id:u.id,name:u.name,type:u.type,level:t};if(t<l&&"children"in u&&u.children.length>0){let b=d(u.children,t+1,l);b.length>0&&(g.hasChildren=!0,g.children=b,g.nestedCount=b.length)}p.push(g)}return p};a=d(i.children,1,4),a=a.slice(0,30)}let r,s=null,c=null;if(i.type==="FRAME"){let d=i,n=d.boundVariables;r={corners:{topLeft:!!(n!=null&&n.topLeftRadius),topRight:!!(n!=null&&n.topRightRadius),bottomLeft:!!(n!=null&&n.bottomLeftRadius),bottomRight:!!(n!=null&&n.bottomRightRadius)},padding:{top:!!(n!=null&&n.paddingTop),bottom:!!(n!=null&&n.paddingBottom),left:!!(n!=null&&n.paddingLeft),right:!!(n!=null&&n.paddingRight)},spacing:!!(n!=null&&n.itemSpacing)},s=E(i.name),c=I(d)}figma.ui.postMessage({type:"selection-change",node:{id:i.id,name:i.name,type:i.type},parentNode:o,childNodes:a,variableBindings:r,directionalExtension:s,layoutDirection:c})}else figma.ui.postMessage({type:"selection-change",node:null,parentNode:null,childNodes:[],variableBindings:void 0})}function E(e){return e.includes(".row.")?"row.":e.includes(".column.")?"column.":null}function V(e){let i=E(e);if(i){let o=`.${i}`,a=e.indexOf(o);if(a!==-1){let r=e.substring(0,a+1),s=e.substring(a+o.length),c=r+s;for(let d of H)if(c.startsWith(d))return d;for(let d of H)if(r===d||r.endsWith(d))return d}}else for(let o of H)if(e.startsWith(o))return o;return null}function G(e){let i=V(e),o=E(e),a=e;if(i&&(a=e.substring(i.length)),o){if(a.startsWith(o))a=a.substring(o.length);else if(a.startsWith(`.${o}`))a=a.substring(o.length+1);else{let r=a;a=a.replace(new RegExp(`\\.${o.replace(".","\\.")}`),""),a===r&&(a=a.replace(new RegExp(`${o.replace(".","\\.")}`),""))}a.includes(o)&&(a=a.replace(new RegExp(`${o.replace(".","\\.")}`),""))}return a}async function xe(e,i,o=!1){try{await figma.currentPage.loadAsync();let a=await figma.getNodeByIdAsync(e);if(!a)throw new Error(`Node with ID ${e} not found`);a.type==="PAGE"&&await a.loadAsync();let r=V(a.name)||"parent.",s=V(i);if(!s)throw new Error("New name does not have a valid prefix");a.name=i;let c=1;if(o&&"children"in a){a.type==="PAGE"&&await a.loadAsync();let d=a.children,n=ee(d,r),l=await T(d,s,"",[],n,r!==s,"setup");if(c+=l.renamedCount,l.skippedNodes.length>0){_=l.skippedNodes;let p=l.skippedNodes.map(u=>({id:u.node.id,path:u.path,currentPrefix:u.currentPrefix,suggestedPrefix:u.suggestedPrefix}));return figma.ui.postMessage({type:"hierarchy-skip-prompt",skippedNodes:p}),figma.notify(`Renamed ${c} layers. Found ${l.skippedNodes.length} layers with skipped hierarchy levels.`),!0}}return figma.ui.postMessage({type:"rename-success",nodeId:e,newName:i}),c>1&&figma.notify(`Renamed ${c} layers following hierarchy rules`),!0}catch(a){let r=a instanceof Error?a.message:"An unknown error occurred";return figma.ui.postMessage({type:"error",message:`Failed to rename: ${r}`}),!1}}async function Ee(e,i){let o=0;for(let a of e){let r=i.find(s=>s.node.id===a);if(r){let s=await figma.getNodeByIdAsync(a);s&&(s.name=`${r.suggestedPrefix}${r.baseName}`,o++,console.log(`Renamed node from ${r.currentPrefix}${r.baseName} to ${r.suggestedPrefix}${r.baseName}`))}}return o}var me={"parent.":1,"child.":2,"subChild.":3,"hero.":0};function be(e,i){if(e==="hero."||i==="hero.")return!1;let o=me[e],a=me[i];return Math.abs(a-o)>1}function ee(e,i,o=new Map){for(let a of e){let r=V(a.name);r?(o.set(a.id,{prefix:r,parentPrefix:i}),"children"in a&&ee(a.children,r,o)):"children"in a&&ee(a.children,i,o)}return o}async function T(e,i,o="",a=[],r,s=!1,c="setup"){let d=0;for(let n of e){let t=o?`${o} > ${n.name}`:n.name,l=V(n.name);if(l){let p=G(n.name),u=E(n.name),f=le[i]||i;if(be(i,l))if(r?(()=>{let b=r.get(n.id);return b?be(b.parentPrefix,b.prefix):!1})():!1){if(a.push({node:n,currentPrefix:l,suggestedPrefix:f,baseName:p,path:t}),console.log(`Pre-existing hierarchy skip detected: ${i} to ${l} in ${t}`),"children"in n){await figma.currentPage.loadAsync();let b=await T(n.children,l,t,a,r,!1,c);d+=b.renamedCount}}else{let b=`${f}${p}`;if(n.type==="FRAME"&&"layoutMode"in n&&n.layoutMode!=="NONE")if(Q(n,c)){let h=I(n);b=`${f}${h}.${p}`}else u&&(b=`${f}${u}${p}`);else u&&(b=`${f}${u}${p}`);if(n.name=b,d++,"children"in n){await figma.currentPage.loadAsync();let y=n.children,h=await T(y,f,t,a,r,!1,c);d+=h.renamedCount}}else{if(l===f){if(s){let g=`${f}${p}`;if(n.type==="FRAME"&&"layoutMode"in n&&n.layoutMode!=="NONE"){let b=n;if(Q(b,c)){let h=I(b);g=`${f}${h}.${p}`}else if(u){let w=`${I(b)}.`;u!==w?g=`${f}${w}${p}`:g=`${f}${u}${p}`}}else u&&(g=`${f}${u}${p}`);n.name=g,d++}else if(u&&n.type==="FRAME"&&"layoutMode"in n&&n.layoutMode!=="NONE"){let y=`${I(n)}.`;if(u!==y){let h=`${f}${y}${p}`;n.name=h,d++}}}else{let g=`${f}${p}`;if(n.type==="FRAME"&&"layoutMode"in n&&n.layoutMode!=="NONE"){let b=n;if(Q(b,c)){let h=I(b);g=`${f}${h}.${p}`}else u&&(g=`${f}${u}${p}`)}else u&&(g=`${f}${u}${p}`);n.name=g,d++}if("children"in n){await figma.currentPage.loadAsync();let g=n.children,b=await T(g,f,t,a,r,!1,c);d+=b.renamedCount}}}else if(n.type==="FRAME"&&"layoutMode"in n&&n.layoutMode!=="NONE"){let p=E(n.name),u=null,f=n.name;if(p){let b=`.${p}`,y=n.name.indexOf(b);if(y!==-1){let h=n.name.substring(0,y);for(let w of H)if(h===w||h.endsWith(w)){u=w,f=n.name.substring(w.length+b.length);break}}}let g=le[i]||i;if(g!=="subChild."||i!=="subChild."){let b=u?f:n.name,y=n,h=Q(y,c),w=`${g}${b}`;if(h){let R=I(y);w=`${g}${R}.${b}`}else p&&u&&(w=`${g}${p}${b}`);if(n.name=w,d++,"children"in n){await figma.currentPage.loadAsync();let R=n.children,C=await T(R,g,t,a,r,!1,c);d+=C.renamedCount}}else if("children"in n){await figma.currentPage.loadAsync();let b=n.children,y=await T(b,i,t,a,r,!1,c);d+=y.renamedCount}}else if("children"in n){await figma.currentPage.loadAsync();let p=n.children,u=await T(p,i,t,a,r,!1,c);d+=u.renamedCount}}return{renamedCount:d,skippedNodes:a}}var _=[];async function Se(e){let i="parent.";try{if(await figma.currentPage.loadAsync(),e.parent&&e.parent.type!=="PAGE"){let o=V(e.parent.name);o?i=le[o]||"parent.":i="parent."}else i="parent."}catch(o){i="parent."}return i}async function Pe(e){try{await figma.currentPage.loadAsync();let i=await figma.getNodeByIdAsync(e);if(!i)throw new Error(`Node with ID ${e} not found`);i.type==="PAGE"&&await i.loadAsync();let o=await Se(i),a=G(i.name),r=`${o}${a}`;return i.name=r,figma.ui.postMessage({type:"rename-success",nodeId:e,newName:r}),figma.notify(`Auto-adjusted to ${r} based on hierarchy`),!0}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return figma.ui.postMessage({type:"error",message:`Failed to auto-adjust: ${o}`}),!1}}figma.ui.onmessage=async e=>{var i,o,a,r,s,c,d,n;if(e.type==="apply-variables")try{let t=e.applyToNested||!1,l=e.applyToSpacing!==void 0?e.applyToSpacing:!0;await re(!1,e.corners,e.padding,t,l),x()}catch(t){let l=t instanceof Error?t.message:"An unknown error occurred";figma.ui.postMessage({type:"error",message:l})}else if(e.type==="get-spacing-variable-mode")try{let t=await figma.getNodeByIdAsync(e.nodeId);if(t&&"itemSpacing"in t){let p=await Re(t);figma.ui.postMessage({type:"spacing-variable-mode",mode:p})}else figma.ui.postMessage({type:"spacing-variable-mode",mode:null})}catch(t){console.error("Error getting spacing variable mode:",t),figma.ui.postMessage({type:"spacing-variable-mode",mode:null})}else if(e.type==="update-spacing-variable-mode")try{if(figma.currentPage.selection.length===0)throw new Error("Please select a frame");let t=figma.currentPage.selection[0];if(!t||t.type!=="FRAME")throw new Error("Please select a frame");if("itemSpacing"in t){let l=await He(t,e.mode),p=await ye(t);if(l&&p)figma.ui.postMessage({type:"success",message:`Spacing mode set to "${e.mode}"`}),figma.notify(`Spacing: ${e.mode}`);else{let u=[];throw l||u.push("spacing mode"),p||u.push("layout mode"),new Error(`Failed to set ${u.join(" and ")}`)}}else throw new Error("Selected frame does not support spacing")}catch(t){let l=t instanceof Error?t.message:"An unknown error occurred";figma.ui.postMessage({type:"error",message:l})}else if(e.type==="get-layout-variable-modes")try{let t=await figma.getNodeByIdAsync(e.nodeId);if(t&&t.type==="FRAME"){let p=await he(t);figma.ui.postMessage({type:"layout-variable-modes",modes:p})}else figma.ui.postMessage({type:"layout-variable-modes",modes:{layout:null,padding:null,spacing:null,cornerRadius:null}})}catch(t){console.error("Error getting layout variable modes:",t),figma.ui.postMessage({type:"layout-variable-modes",modes:{layout:null,padding:null,spacing:null,cornerRadius:null}})}else if(e.type==="update-layout-variable-mode")try{if(figma.currentPage.selection.length===0)throw new Error("Please select a frame");let t=figma.currentPage.selection[0];if(!t||t.type!=="FRAME")throw new Error("Please select a frame");if(await Ge(t,e.collectionName,e.mode)){e.collectionName==="A1 \u{1F4D0} Layout"&&e.mode.toLowerCase()==="manual"&&await ye(t),figma.ui.postMessage({type:"success",message:`${e.collectionName} mode set to "${e.mode}"`});let p=await he(t);figma.ui.postMessage({type:"layout-variable-modes",modes:p})}else throw new Error(`Failed to set ${e.collectionName} mode to "${e.mode}"`)}catch(t){let l=t instanceof Error?t.message:"An unknown error occurred";figma.ui.postMessage({type:"error",message:l})}else if(e.type==="get-available-variable-modes")try{let t=await je(e.collectionName);figma.ui.postMessage({type:"available-variable-modes",collectionName:e.collectionName,modes:t})}catch(t){console.error("Error getting available variable modes:",t),figma.ui.postMessage({type:"available-variable-modes",collectionName:e.collectionName,modes:[]})}else if(e.type==="clear-variables")try{let t=e.applyToSpacing!==void 0?e.applyToSpacing:!1;await Ke(e.corners,e.padding,e.applyToNested,t),x()}catch(t){let l=t instanceof Error?t.message:"An unknown error occurred";figma.ui.postMessage({type:"error",message:l})}else if(e.type==="rename-node")try{if(_=[],await xe(e.nodeId,e.newName,e.renameNested))if(x(),e.applyAfter){await figma.currentPage.loadAsync();let l=await figma.getNodeByIdAsync(e.nodeId);if(l&&"children"in l){l.type==="PAGE"&&await l.loadAsync();let g=l.children}await new Promise(g=>setTimeout(g,100));let p=e.renameNested||e.applyToNested||!1,u=e.renameNested,f=e.applyToSpacing!==void 0?e.applyToSpacing:!0;await re(u,e.corners,e.padding,p,f),x()}else x()}catch(t){console.error("Error in rename-node handler:",t);let l=t instanceof Error?t.message:"An unknown error occurred";figma.ui.postMessage({type:"error",message:l})}else if(e.type==="auto-adjust")try{_=[],await figma.currentPage.loadAsync();let t=await figma.getNodeByIdAsync(e.nodeId),l=t&&V(t.name)||"parent.";if(await Pe(e.nodeId)){if(e.renameNested){let u=await figma.getNodeByIdAsync(e.nodeId);if(u&&"children"in u){u.type==="PAGE"&&await u.loadAsync();let f=V(u.name)||"parent.",g=u.children,b=ee(g,l),h=await T(g,f,"",[],b,l!==f,"adjust");if(h.renamedCount>0&&figma.notify(`Renamed ${h.renamedCount} nested layers to follow hierarchy`),h.skippedNodes.length>0){_=h.skippedNodes;let w=h.skippedNodes.map(R=>({id:R.node.id,path:R.path,currentPrefix:R.currentPrefix,suggestedPrefix:R.suggestedPrefix}));figma.ui.postMessage({type:"hierarchy-skip-prompt",skippedNodes:w})}}}if(e.applyAfter){await figma.currentPage.loadAsync();let u=await figma.getNodeByIdAsync(e.nodeId);if(u&&"children"in u){u.type==="PAGE"&&await u.loadAsync();let y=u.children}let f=e.renameNested||e.applyToNested||!1,g=e.renameNested,b=e.applyToSpacing!==void 0?e.applyToSpacing:!0;await re(g,e.corners,e.padding,f,b),x()}else x()}}catch(t){let l=t instanceof Error?t.message:"An unknown error occurred";figma.ui.postMessage({type:"error",message:l})}else if(e.type==="hierarchy-skip-response")try{if(_.length>0&&e.nodesToRename.length>0){let t=await Ee(e.nodesToRename,_);figma.notify(`Renamed ${t} additional layers to follow hierarchy rules`),_=[]}}catch(t){let l=t instanceof Error?t.message:"An unknown error occurred";figma.ui.postMessage({type:"error",message:l})}else if(e.type!=="ui-toggle-change")if(e.type==="resize-height"){let t=Math.max(300,e.height);figma.ui.resize(400,t)}else if(e.type==="resize-width"){let t=Math.max(360,e.width);figma.ui.resize(t,480)}else if(e.type==="resize"){let t=Math.max(360,e.width),l=Math.max(300,e.height);figma.ui.resize(t,l)}else if(e.type==="remove-directional-prefix")try{let t=await figma.getNodeByIdAsync(e.nodeId);if(!t||t.type!=="FRAME"){figma.ui.postMessage({type:"error",message:"Selected node is not a frame"});return}let l=t;if(!E(l.name)){figma.ui.postMessage({type:"error",message:"Frame does not have a directional prefix"});return}let u=V(l.name),f=G(l.name),g=u?`${u}${f}`:f;l.name=g,x(),figma.ui.postMessage({type:"success",message:"Removed directional prefix"})}catch(t){let l=t instanceof Error?t.message:"An unknown error occurred";figma.ui.postMessage({type:"error",message:l})}else if(e.type==="add-directional-prefix")try{let t=await figma.getNodeByIdAsync(e.nodeId);if(!t||t.type!=="FRAME"){figma.ui.postMessage({type:"error",message:"Selected node is not a frame"});return}let l=t;if(E(l.name)){figma.ui.postMessage({type:"error",message:"Frame already has a directional prefix"});return}let u=!!((i=l.boundVariables)!=null&&i.paddingTop||(o=l.boundVariables)!=null&&o.paddingBottom||(a=l.boundVariables)!=null&&a.paddingLeft||(r=l.boundVariables)!=null&&r.paddingRight),f=!!((s=l.boundVariables)!=null&&s.topLeftRadius||(c=l.boundVariables)!=null&&c.topRightRadius||(d=l.boundVariables)!=null&&d.bottomLeftRadius||(n=l.boundVariables)!=null&&n.bottomRightRadius);if(u||f){figma.ui.postMessage({type:"error",message:"Cannot add directional prefix to frame with padding or corner radius variables bound"});return}let g=I(l),b=V(l.name),y=G(l.name),h=b?`${b}${g}.${y}`:`${g}.${y}`;l.name=h,x(),figma.ui.postMessage({type:"success",message:`Added ${g} directional prefix`})}catch(t){let l=t instanceof Error?t.message:"An unknown error occurred";figma.ui.postMessage({type:"error",message:l})}else e.type==="cancel"&&figma.closePlugin()};function Ce(e){if(H.some(o=>e.startsWith(o)))return!0;let i=E(e);if(i){let o=e.replace(`.${i}`,"");return H.some(a=>o.startsWith(a))}return!1}function Fe(e){return V(e)}async function oe(e,i=!0,o=0){let a=[];for(let r of e)if(r.type==="FRAME"&&"layoutMode"in r&&r.layoutMode!=="NONE"&&Ce(r.name)){a.push(r);let c=V(r.name)==="subChild.";if(i&&!c&&"children"in r){await figma.currentPage.loadAsync();let d=await oe(r.children,!0,o+1);a.push(...d)}}else if(i&&"children"in r){await figma.currentPage.loadAsync();let s=await oe(r.children,!0,o+1);a.push(...s)}return a}function Ie(e){let i=new Map;for(let o of e){let a=Fe(o.name);a&&(i.has(a)||i.set(a,[]),i.get(a).push(o))}return i}async function Be(e,i,o){let a=de[i];if(!a)return console.error(`No mode found for prefix ${i}`),0;let r=0,s=new Map;for(let c of o){let d=c.modes.find(n=>n.name.toLowerCase()===a.toLowerCase());d?s.set(c,d.modeId):console.warn(`Mode "${a}" not found in ${c.name}`)}for(let c of e){let d=!0;for(let[n,t]of s)try{c.setExplicitVariableModeForCollection(n,t)}catch(l){console.error(`Failed to set ${n.name} mode on ${c.name}:`,l),d=!1}d&&r++}return r}async function Te(e,i){try{let o=e.explicitVariableModes[i.id];if(!o)return!1;let a=i.modes.find(r=>r.modeId===o);return a?a.name.toLowerCase()==="manual":!1}catch(o){return console.error("Error checking manual layout mode:",o),!1}}async function De(e,i){let o=new Map;for(let a of i){let r=e.explicitVariableModes[a.id];r&&o.set(a,r)}return o}async function Ae(e){let i=[];for(let o of e)if(o.type==="FRAME"&&i.push(o),"children"in o){await figma.currentPage.loadAsync();let a=await Ae(o.children);i.push(...a)}return i}async function Oe(e){try{let i=await figma.variables.getLocalVariableCollectionsAsync(),o=D(i,"A3 \u2194\uFE0F Spacing");if(!o){let s=await figma.teamLibrary.getAvailableLibraryVariableCollectionsAsync(),c=O(s,"A3 \u2194\uFE0F Spacing",!0);if(c){let d=await figma.teamLibrary.getVariablesInLibraryCollectionAsync(c.key);if(d&&d.length>0){let n=await figma.variables.importVariableByKeyAsync(d[0].key);if(n){let t=await figma.variables.getVariableCollectionByIdAsync(n.variableCollectionId);t&&(o=t)}}}}if(!o)return null;let a=await Re(e);if(!a)return null;let r=o.modes.find(s=>s.name.toLowerCase()===a.toLowerCase());return r?r.modeId:null}catch(i){return console.error("Error getting spacing collection variable mode ID:",i),null}}async function We(e){var u;let i=["A1 \u{1F4D0} Layout","A2 \u{1F4E6} Padding","A3 \u2194\uFE0F Spacing","A4 \u256D Corner Radius"],o=await figma.variables.getLocalVariableCollectionsAsync(),a=[];for(let f of i){let g=D(o,f);g&&a.push(g)}if(a.length<i.length){let f=await figma.teamLibrary.getAvailableLibraryVariableCollectionsAsync();for(let g of i)if(!we(a,g)){let b=O(f,g,!0);if(b)try{let y=await figma.teamLibrary.getVariablesInLibraryCollectionAsync(b.key);if(y&&y.length>0){let h=await figma.variables.importVariableByKeyAsync(y[0].key);if(h){let w=await figma.variables.getVariableCollectionByIdAsync(h.variableCollectionId);w&&a.push(w)}}}catch(y){console.error(`Error importing ${g}:`,y)}}}if(a.length===0)return 0;let r=0,s=new Map;for(let f of a)s.set(f.name,f);let c="A1 \u{1F4D0} Layout",d=s.get(c);if(!d){let f=j[c];if(f){for(let g of f)if(d=s.get(g),d)break}}let n="A3 \u2194\uFE0F Spacing",t=s.get(n);if(!t){let f=j[n];if(f){for(let g of f)if(t=s.get(g),t)break}}let l=[];for(let f of e)if(l.push(f),"children"in f){await figma.currentPage.loadAsync();let g=await Ae(f.children);l.push(...g)}let p=new Set;if(d)for(let f of l)await Te(f,d)&&p.add(f.id);for(let f of e){let g=!0,b=p.has(f.id),y=null;b&&(y=await De(f,a));let h=E(f.name)!==null,w=null;!b&&h&&t&&((u=f.boundVariables)!=null&&u.itemSpacing)&&(w=await Oe(f));for(let R of i){let C=s.get(R);if(!C){let A=j[R];if(A){for(let $ of A)if(C=s.get($),C)break}}if(C&&!(b&&y&&y.get(C))&&!(!b&&h&&C===t&&w))try{let A=null,$=C.modes.find(N=>N.name.toLowerCase()==="standard"||N.name.toLowerCase()==="default");$?A=$.modeId:C.modes.length>0&&(A=C.modes[0].modeId),A?f.setExplicitVariableModeForCollection(C,A):(console.warn(`No standard mode found for collection ${C.name}`),g=!1)}catch(A){console.error(`Failed to set master collection mode for ${C.name} on frame ${f.name}:`,A),g=!1}}if(b&&y)for(let[R,C]of y)try{f.setExplicitVariableModeForCollection(R,C);let A=R.modes.find(N=>N.modeId===C),$=A?A.name:C}catch(A){console.error(`Failed to restore ${R.name} mode for ${f.name}:`,A)}else if(h&&w&&t)try{f.setExplicitVariableModeForCollection(t,w)}catch(R){console.error(`Failed to restore spacing collection mode for ${f.name}:`,R)}g&&r++}return r}var _e={"spacing - standard":{"parent (default)":"16px",child:"8px","sub-child":"4px",hero:"24px"},"spacing - small":{"parent (default)":"8px",child:"4px","sub-child":"2px",hero:"16px"},"spacing - x-small":{"parent (default)":"4px",child:"2px","sub-child":"2px",hero:"8px"},"spacing - medium":{"parent (default)":"12px",child:"8px","sub-child":"4px",hero:"18px"},"spacing - large":{"parent (default)":"24px",child:"16px","sub-child":"8px",hero:"40px"},"spacing - x-large":{"parent (default)":"32px",child:"24px","sub-child":"16px",hero:"56px"}},ke={"spacing - standard":"standard","spacing - x-small":"x-small","spacing - small":"small","spacing - medium":"medium","spacing - large":"large","spacing - x-large":"x-large"};async function Re(e){var i;try{if(!("itemSpacing"in e)||!((i=e.boundVariables)!=null&&i.itemSpacing))return null;let o=e.boundVariables.itemSpacing.id,a=await figma.variables.getVariableByIdAsync(o);if(!a)return null;let r=V(e.name),s=r?de[r]:"parent (default)",c=a.resolveForConsumer(e);if(!c||c.resolvedType!=="FLOAT"||typeof c.value!="number")return null;let d=`${Math.round(c.value)}px`;for(let[n,t]of Object.entries(_e))if(t[s]===d)return ke[n];return null}catch(o){return console.error("Error getting spacing variable mode:",o),null}}async function ye(e){try{let i=await figma.variables.getLocalVariableCollectionsAsync(),o=D(i,"A1 \u{1F4D0} Layout");if(!o){let r=await figma.teamLibrary.getAvailableLibraryVariableCollectionsAsync(),s=O(r,"A1 \u{1F4D0} Layout",!0);if(s){let c=await figma.teamLibrary.getVariablesInLibraryCollectionAsync(s.key);if(c&&c.length>0){let d=await figma.variables.importVariableByKeyAsync(c[0].key);if(d){let n=await figma.variables.getVariableCollectionByIdAsync(d.variableCollectionId);n&&(o=n)}}}}if(!o)return console.warn("A1 \u{1F4D0} Layout collection not found"),!1;let a=o.modes.find(r=>r.name.toLowerCase()==="manual");return a?(e.setExplicitVariableModeForCollection(o,a.modeId),!0):(console.warn(`Mode "manual" not found in A1 \u{1F4D0} Layout collection. Available modes: ${o.modes.map(r=>r.name).join(", ")}`),!1)}catch(i){return console.error("Error setting A1 \u{1F4D0} Layout collection to manual mode:",i),!1}}async function He(e,i){try{let o=await figma.variables.getLocalVariableCollectionsAsync(),a=D(o,"A3 \u2194\uFE0F Spacing");if(!a){let s=await figma.teamLibrary.getAvailableLibraryVariableCollectionsAsync(),c=O(s,"A3 \u2194\uFE0F Spacing",!0);if(c){let d=await figma.teamLibrary.getVariablesInLibraryCollectionAsync(c.key);if(d&&d.length>0){let n=await figma.variables.importVariableByKeyAsync(d[0].key);if(n){let t=await figma.variables.getVariableCollectionByIdAsync(n.variableCollectionId);t&&(a=t)}}}}if(!a)return console.warn("A3 \u2194\uFE0F Spacing collection not found"),!1;let r=a.modes.find(s=>s.name.toLowerCase()===i.toLowerCase());return r?(e.setExplicitVariableModeForCollection(a,r.modeId),!0):(console.warn(`Mode "${i}" not found in A3 \u2194\uFE0F Spacing collection. Available modes: ${a.modes.map(s=>s.name).join(", ")}`),!1)}catch(o){return console.error("Error setting spacing variable mode:",o),!1}}async function ue(e){let i=await figma.variables.getLocalVariableCollectionsAsync(),o=D(i,e);if(!o){let a=await figma.teamLibrary.getAvailableLibraryVariableCollectionsAsync(),r=O(a,e,!0);if(r){let s=await figma.teamLibrary.getVariablesInLibraryCollectionAsync(r.key);if(s&&s.length>0){let c=await figma.variables.importVariableByKeyAsync(s[0].key);if(c){let d=await figma.variables.getVariableCollectionByIdAsync(c.variableCollectionId);d&&(o=d)}}}}return o}async function Y(e,i){try{let o=await ue(i);if(!o)return null;let a=e.explicitVariableModes[o.id];if(!a)return null;let r=o.modes.find(s=>s.modeId===a);return r?r.name:null}catch(o){return console.error(`Error getting variable mode for ${i}:`,o),null}}async function he(e){let[i,o,a,r]=await Promise.all([Y(e,"A1 \u{1F4D0} Layout"),Y(e,"A2 \u{1F4E6} Padding"),Y(e,"A3 \u2194\uFE0F Spacing"),Y(e,"A4 \u256D Corner Radius")]);return{layout:i,padding:o,spacing:a,cornerRadius:r}}async function je(e){try{let i=await ue(e);return i?i.modes.map(o=>o.name):(console.warn(`${e} collection not found`),[])}catch(i){return console.error(`Error getting available variable modes for ${e}:`,i),[]}}async function Ge(e,i,o){try{let a=await ue(i);if(!a)return console.warn(`${i} collection not found`),!1;let r=a.modes.find(s=>s.name.toLowerCase()===o.toLowerCase());return r?(e.setExplicitVariableModeForCollection(a,r.modeId),!0):(console.warn(`Mode "${o}" not found in ${i} collection. Available modes: ${a.modes.map(s=>s.name).join(", ")}`),!1)}catch(a){return console.error(`Error setting variable mode for ${i}:`,a),!1}}async function Le(e,i,o,a=!1){var r,s,c,d,n,t,l,p,u,f,g,b;try{return a&&"itemSpacing"in e&&e.setBoundVariable("itemSpacing",null),o?(o.left&&((n=e.boundVariables)!=null&&n.paddingLeft)&&e.setBoundVariable("paddingLeft",null),o.right&&((t=e.boundVariables)!=null&&t.paddingRight)&&e.setBoundVariable("paddingRight",null),o.top&&((l=e.boundVariables)!=null&&l.paddingTop)&&e.setBoundVariable("paddingTop",null),o.bottom&&((p=e.boundVariables)!=null&&p.paddingBottom)&&e.setBoundVariable("paddingBottom",null)):((r=e.boundVariables)!=null&&r.paddingLeft||(s=e.boundVariables)!=null&&s.paddingRight||(c=e.boundVariables)!=null&&c.paddingTop||(d=e.boundVariables)!=null&&d.paddingBottom)&&(e.setBoundVariable("paddingLeft",null),e.setBoundVariable("paddingRight",null),e.setBoundVariable("paddingTop",null),e.setBoundVariable("paddingBottom",null)),i?(i.topLeft&&((u=e.boundVariables)!=null&&u.topLeftRadius)&&e.setBoundVariable("topLeftRadius",null),i.topRight&&((f=e.boundVariables)!=null&&f.topRightRadius)&&e.setBoundVariable("topRightRadius",null),i.bottomLeft&&((g=e.boundVariables)!=null&&g.bottomLeftRadius)&&e.setBoundVariable("bottomLeftRadius",null),i.bottomRight&&((b=e.boundVariables)!=null&&b.bottomRightRadius)&&e.setBoundVariable("bottomRightRadius",null)):(e.setBoundVariable("topLeftRadius",null),e.setBoundVariable("topRightRadius",null),e.setBoundVariable("bottomLeftRadius",null),e.setBoundVariable("bottomRightRadius",null)),!0}catch(y){return console.error(`Failed to clear variables from frame ${e.name}:`,y),!1}}function ce(e){if(typeof e.strokeWeight=="number"&&e.strokeWeight>0)return!0;if("fills"in e&&Array.isArray(e.fills)){for(let i of e.fills)if(i.visible!==!1){if(i.type==="SOLID"){if(!(i.color.r===1&&i.color.g===1&&i.color.b===1&&(i.opacity===void 0||i.opacity===1)))return!0}else if(i.type!=="SOLID")return!0}}if("effects"in e&&Array.isArray(e.effects)){for(let i of e.effects)if(i.visible!==!1)return!0}return!1}function I(e){if("layoutMode"in e){if(e.layoutMode==="HORIZONTAL")return"row";if(e.layoutMode==="VERTICAL")return"column"}return"row"}function Q(e,i){if(i==="setup"){let o=e.paddingTop===0&&e.paddingBottom===0&&e.paddingLeft===0&&e.paddingRight===0,a=typeof e.cornerRadius!="undefined"&&e.cornerRadius!==figma.mixed&&e.cornerRadius===0;return o&&a}else{let o=e.boundVariables,a=!!(o!=null&&o.itemSpacing),r=!(o!=null&&o.paddingTop)&&!(o!=null&&o.paddingBottom)&&!(o!=null&&o.paddingLeft)&&!(o!=null&&o.paddingRight),s=!(o!=null&&o.topLeftRadius)&&!(o!=null&&o.topRightRadius)&&!(o!=null&&o.bottomLeftRadius)&&!(o!=null&&o.bottomRightRadius);return a&&r&&s}}async function ze(e,i,o,a,r,s,c,d=!0){var n,t,l,p,u,f,g,b,y,h,w,R;try{if(E(e.name))return i&&"itemSpacing"in e&&d&&e.setBoundVariable("itemSpacing",i),!0;let A=ce(e),$=c&&(c.top||c.bottom||c.left||c.right),N=s&&(s.topLeft||s.topRight||s.bottomLeft||s.bottomRight),Z=o&&A&&(!c||$),Ne=a&&(!s||N),ae=d;if(i&&"itemSpacing"in e&&ae&&e.setBoundVariable("itemSpacing",i),o&&A&&(c?$&&(c.left&&e.setBoundVariable("paddingLeft",o),c.right&&e.setBoundVariable("paddingRight",o),c.top&&e.setBoundVariable("paddingTop",o),c.bottom&&e.setBoundVariable("paddingBottom",o)):(e.setBoundVariable("paddingLeft",o),e.setBoundVariable("paddingRight",o),e.setBoundVariable("paddingTop",o),e.setBoundVariable("paddingBottom",o))),a){let F=s&&(s.topLeft||s.topRight||s.bottomLeft||s.bottomRight);if(!s||F)try{let v=!s,W=[{corner:"topLeftRadius",enabled:v||((n=s==null?void 0:s.topLeft)!=null?n:!1)},{corner:"topRightRadius",enabled:v||((t=s==null?void 0:s.topRight)!=null?t:!1)},{corner:"bottomLeftRadius",enabled:v||((l=s==null?void 0:s.bottomLeft)!=null?l:!1)},{corner:"bottomRightRadius",enabled:v||((p=s==null?void 0:s.bottomRight)!=null?p:!1)}];r?(typeof e.cornerRadius!="undefined"&&e.cornerRadius!==figma.mixed&&(e.cornerRadius=0),e.setBoundVariable("topLeftRadius",null),e.setBoundVariable("topRightRadius",null),e.setBoundVariable("bottomLeftRadius",null),e.setBoundVariable("bottomRightRadius",null),W.forEach(({corner:M,enabled:S})=>{S&&e.setBoundVariable(M,a)}),setTimeout(()=>{try{W.forEach(({corner:M,enabled:S})=>{S&&e.setBoundVariable(M,a)})}catch(M){console.error(`Failed delayed corner radius on ${e.name}:`,M)}},10)):(e.setBoundVariable("topLeftRadius",null),e.setBoundVariable("topRightRadius",null),e.setBoundVariable("bottomLeftRadius",null),e.setBoundVariable("bottomRightRadius",null),W.forEach(({corner:M,enabled:S})=>{S&&e.setBoundVariable(M,a)}),typeof e.cornerRadius!="undefined"&&e.cornerRadius!==figma.mixed&&(e.cornerRadius=0)),((u=e.boundVariables)==null?void 0:u.topLeftRadius)||((f=e.boundVariables)==null?void 0:f.topRightRadius)||((g=e.boundVariables)==null?void 0:g.bottomLeftRadius)||((b=e.boundVariables)==null?void 0:b.bottomRightRadius)||(e.cornerRadius=0,W.forEach(({corner:S,enabled:q})=>{q&&e.setBoundVariable(S,a)}),(y=e.boundVariables)!=null&&y.topLeftRadius||(h=e.boundVariables)!=null&&h.topRightRadius||(w=e.boundVariables)!=null&&w.bottomLeftRadius||(R=e.boundVariables)!=null&&R.bottomRightRadius||console.warn(`Corner radius failed on ${e.name}`))}catch(v){console.error(`Failed corner radius on ${e.name}:`,v)}}return!0}catch(C){return console.error(`Failed to apply variables to frame ${e.name}:`,C),!1}}async function Ue(){let e=figma.root.name.toLowerCase(),i=e.includes("design system")||e.includes("cirrus")||e.includes("native design system"),o=await figma.variables.getLocalVariableCollectionsAsync(),a=null,r=null,s=null,c=null;if(i){if(a=D(o,"A1 \u{1F4D0} Layout"),a){let n=(await figma.variables.getLocalVariablesAsync()).filter(l=>l.variableCollectionId===a.id),t={spacing:n.find(l=>["spacing","Spacing"].includes(l.name)),padding:n.find(l=>["padding","Padding"].includes(l.name)),cornerRadius:n.find(l=>["corner-radius","Corner Radius","cornerRadius","corner radius"].includes(l.name))};r=t.spacing||n.find(l=>l.name.toLowerCase().includes("spacing"))||null,s=t.padding||n.find(l=>l.name.toLowerCase().includes("padding"))||null,c=t.cornerRadius||n.find(l=>l.name.toLowerCase().includes("corner")||l.name.toLowerCase().includes("radius"))||null}}else{if(a=D(o,"A1 \u{1F4D0} Layout"),a){let n=(await figma.variables.getLocalVariablesAsync()).filter(t=>t.variableCollectionId===a.id);r=n.find(t=>t.name.toLowerCase().includes("spacing"))||null,s=n.find(t=>t.name.toLowerCase().includes("padding"))||null,c=n.find(t=>t.name.toLowerCase().includes("corner")||t.name.toLowerCase().includes("radius"))||null}if(!a||!r||!s||!c){let d=await figma.teamLibrary.getAvailableLibraryVariableCollectionsAsync();d.length===0&&console.warn("No library collections found. Enable design system library in Assets \u2192 Libraries");let n=O(d,"A1 \u{1F4D0} Layout",!0);if(n||(n=O(d,"A1 \u{1F4D0} Layout",!1)),n){let t=await figma.teamLibrary.getVariablesInLibraryCollectionAsync(n.key);if(!r){let l=t.find(p=>p.name.toLowerCase().includes("spacing"));l&&(r=await figma.variables.importVariableByKeyAsync(l.key))}if(!s){let l=t.find(p=>p.name.toLowerCase().includes("padding"));l&&(s=await figma.variables.importVariableByKeyAsync(l.key))}if(!c){let l=t.find(p=>p.name.toLowerCase().includes("corner")||p.name.toLowerCase().includes("radius"));l&&(c=await figma.variables.importVariableByKeyAsync(l.key))}if(!a&&(r||s||c)){let l=r||s||c;l&&(a=await figma.variables.getVariableCollectionByIdAsync(l.variableCollectionId),a&&console.log(`Found layout collection from imported variable: ${a.name}`))}}else console.error("\u274C Could not find '\u{1F4D0} Layout' collection in any enabled library")}}return console.log(`
=== Variable Lookup Results ===`),console.log(r?`\u2705 Found spacing variable: ${r.name} (${r.id})`:"\u274C Could not find spacing variable"),console.log(s?`\u2705 Found padding variable: ${s.name} (${s.id})`:"\u274C Could not find padding variable"),console.log(c?`\u2705 Found corner radius variable: ${c.name} (${c.id})`:"\u274C Could not find corner radius variable"),{spacingVar:r,paddingVar:s,cornerRadiusVar:c,isDesignSystemFile:i,layoutCollection:a}}async function Ke(e,i,o=!1,a=!1){let r=figma.currentPage.selection;if(r.length===0)throw new Error("Please select at least one frame");let s=await oe(r,o);if(s.length===0)throw new Error("No frames with auto-layout and allowed name prefixes (parent.*, child.*, subChild.*, hero.*) found in the selection or its children");let c=e&&e.topLeft&&e.topRight&&e.bottomLeft&&e.bottomRight,d=i&&i.top&&i.bottom&&i.left&&i.right,n=c&&d;console.log(`All buttons selected: ${n}`),e&&console.log(`Corner mask: ${JSON.stringify(e)}`),i&&console.log(`Padding mask: ${JSON.stringify(i)}`);let t=0,l=0,p=0;for(let u of s)if(await Le(u,e,i,a)){if(t++,n){let g=V(u.name);if(g){let b=G(u.name);u.name=b,p++,console.log(`Removed prefix "${g}" from: ${u.name} -> ${b}`)}}}else l++;if(p>0&&console.log(`Removed prefix from ${p} frame(s)`),t>0){let u=`Cleared variables from ${t} frame(s)`;p>0&&(u+=`, removed prefix from ${p} frame(s)`),l>0&&(u+=`, ${l} failed`),figma.ui.postMessage({type:"success",message:u}),figma.notify(u)}else throw new Error("Failed to clear variables from any frames")}async function re(e=!0,i,o,a=!1,r=!0){var s,c,d,n,t,l,p,u,f,g,b,y,h;try{let w=figma.currentPage.selection;if(w.length===0)throw new Error("Please select at least one frame");let C=await oe(w,a);if(C.length===0){let m=a?"No frames with auto-layout and allowed name prefixes (parent.*, child.*, subChild.*, hero.*) found in the selection or its children":"No frames with auto-layout and allowed name prefixes (parent.*, child.*, subChild.*, hero.*) found in the selection";throw new Error(m)}let{spacingVar:A,paddingVar:$,cornerRadiusVar:N,isDesignSystemFile:Z,layoutCollection:Ne}=await Ue();if(!A&&!$&&!N){let m=`Could not find any of the required variables (spacing, padding, corner-radius) in the \u{1F4D0} Layout collection.

`;throw Z?m+="Please ensure the \u{1F4D0} Layout collection exists locally and contains the required variables.":(m+=`\u{1F4DA} The Cirrus Design System library needs to be enabled in this file.

`,m+=`To fix this:
`,m+=`1. Open the Assets panel (\u2325 + 2 or Alt + 2)
`,m+=`2. Click on the Libraries icon (book icon)
`,m+=`3. Find "cirrus - native design system" or similar
`,m+=`4. Toggle it ON to enable the library
`,m+=`5. Try applying variables again

`,m+='The library must contain a "\u{1F4D0} Layout" variable collection with spacing, padding, and corner-radius variables.'),new Error(m)}se("Spacing",A,C.length),se("Padding",$,C.filter(m=>ce(m)).length),se("Corner Radius",N,C.length);let ae=await figma.variables.getLocalVariableCollectionsAsync(),F=[];for(let m of J){let L=D(ae,m);L&&F.push(L)}if(F.length<J.length){let m=await figma.teamLibrary.getAvailableLibraryVariableCollectionsAsync();for(let L of J)if(!we(F,L)){let B=O(m,L,!0);if(B)try{let P=await figma.teamLibrary.getVariablesInLibraryCollectionAsync(B.key);if(P&&P.length>0){let k=await figma.variables.importVariableByKeyAsync(P[0].key);if(k){let X=await figma.variables.getVariableCollectionByIdAsync(k.variableCollectionId);X?(F.push(X),console.log(`Successfully loaded collection: ${L} (id: ${X.id})`)):console.warn(`Could not get collection ${L} after importing variable`)}}else console.warn(`No variables found in collection ${L}`)}catch(P){console.error(`Error importing collection ${L}:`,P)}else console.warn(`Could not find collection ${L} in library`)}}console.log(`Total mode collections found: ${F.length} of ${J.length} expected`);let v=0,W=0;if(e){for(let m of C)await Le(m)?v++:W++;console.log(`Cleared variables from ${v} frame(s), ${W} failed`)}let z=0,M=0,S=0,q=0,U=0,K=0,$e=[],ie=C;for(let m of ie)if(ce(m)?S++:q++,await ze(m,A,$,N,Z,i,o,r)){z++,(((s=m.boundVariables)==null?void 0:s.topLeftRadius)||((c=m.boundVariables)==null?void 0:c.topRightRadius)||((d=m.boundVariables)==null?void 0:d.bottomLeftRadius)||((n=m.boundVariables)==null?void 0:n.bottomRightRadius))&&N?U++:N&&(K++,$e.push(m.id),console.warn(`\u26A0\uFE0F Failed to apply corner radius to frame: ${m.name} (ID: ${m.id})`));let k=!!((t=m.boundVariables)!=null&&t.itemSpacing),X=!!((l=m.boundVariables)!=null&&l.paddingTop||(p=m.boundVariables)!=null&&p.paddingBottom||(u=m.boundVariables)!=null&&u.paddingLeft||(f=m.boundVariables)!=null&&f.paddingRight),Ve=!!((g=m.boundVariables)!=null&&g.topLeftRadius||(b=m.boundVariables)!=null&&b.topRightRadius||(y=m.boundVariables)!=null&&y.bottomLeftRadius||(h=m.boundVariables)!=null&&h.bottomRightRadius),Me=E(m.name);if(k&&!X&&!Ve&&!Me&&"layoutMode"in m&&m.layoutMode!=="NONE"){let fe=I(m),ge=V(m.name),pe=G(m.name),ve=ge?`${ge}${fe}.${pe}`:`${fe}.${pe}`;m.name=ve}}else M++;N&&K>0&&console.warn(`Corner radius failed on ${K} frame(s)`);let te=0;if(F.length>0){let m=Ie(ie),L=["parent.","hero.","child.","subChild."];for(let B of L){let P=m.get(B);if(P&&P.length>0){let k=await Be(P,B,F);te+=k}}}else console.warn("No mode collections found - skipping mode setting phase");let ne=0;try{ne=await We(ie)}catch(m){console.error("Error setting master collection modes:",m)}if(z>0){let m=`Applied variables to ${z} frame(s)`;m+=` (${S} visual, ${q} structural)`,e&&v>0&&(m=`Cleared ${v} frame(s), ${m}`),te>0&&(m+=`, set modes for ${te} frame(s)`),ne>0&&(m+=`, set master collection modes for ${ne} frame(s)`),N&&(K>0?m+=`, corner radius: ${U} ok, ${K} failed`:U>0&&(m+=`, corner radius applied: ${U}`)),M>0&&(m+=`, ${M} frame(s) failed`);let L=`

Context: ${Z?"Design System File":"External File"}
`;if(A?L+=`
Spacing: ${A.name} (${A.id})`:L+=`
Spacing: Not found`,$?L+=`
Padding: ${$.name} (${$.id})`:L+=`
Padding: Not found`,N?L+=`
Corner Radius: ${N.name} (${N.id})`:L+=`
Corner Radius: Not found`,figma.ui.postMessage({type:"success",message:m+L}),m.length>100){let B=`Applied variables to ${z} frame(s), ${U} with corner radius`;figma.notify(B)}else figma.notify(m)}else throw new Error("Failed to apply variables to any frames with allowed name prefixes")}catch(w){console.error("Error in applyVariablesToSelection:",w);let R=w instanceof Error?w.message:"An unknown error occurred";throw figma.ui.postMessage({type:"error",message:`Failed to apply variables: ${R}`}),figma.notify(`Failed to apply variables: ${R}`),w}}function se(e,i,o){i?console.log(`${e}: ${i.name} \u2192 ${o} frame(s)`):console.warn(`${e}: not found`)}figma.on("close",()=>{figma.closePlugin()});
